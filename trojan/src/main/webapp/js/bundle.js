!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function request(options,callback){if("function"!=typeof callback)throw new Error("Bad callback given: "+callback);if(!options)throw new Error("No options given");var options_onResponse=options.onResponse;if(options="string"==typeof options?{uri:options}:JSON.parse(JSON.stringify(options)),options.onResponse=options_onResponse,options.verbose&&(request.log=getLogger()),options.url&&(options.uri=options.url,delete options.url),!options.uri&&""!==options.uri)throw new Error("options.uri is a required argument");if("string"!=typeof options.uri)throw new Error("options.uri must be a string");for(var unsupported_options=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],i=0;i<unsupported_options.length;i++)if(options[unsupported_options[i]])throw new Error("options."+unsupported_options[i]+" is not supported");if(options.callback=callback,options.method=options.method||"GET",options.headers=options.headers||{},options.body=options.body||null,options.timeout=options.timeout||request.DEFAULT_TIMEOUT,options.headers.host)throw new Error("Options.headers.host is not supported");options.json&&(options.headers.accept=options.headers.accept||"application/json","GET"!==options.method&&(options.headers["content-type"]="application/json"),"boolean"!=typeof options.json?options.body=JSON.stringify(options.json):"string"!=typeof options.body&&(options.body=JSON.stringify(options.body)));var serialize=function(obj){var str=[];for(var p in obj)obj.hasOwnProperty(p)&&str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")};if(options.qs){var qs="string"==typeof options.qs?options.qs:serialize(options.qs);options.uri=options.uri.indexOf("?")!==-1?options.uri+"&"+qs:options.uri+"?"+qs}var multipart=function(obj){var result={};result.boundry="-------------------------------"+Math.floor(1e9*Math.random());var lines=[];for(var p in obj)obj.hasOwnProperty(p)&&lines.push("--"+result.boundry+"\n"+'Content-Disposition: form-data; name="'+p+'"'+"\n"+"\n"+obj[p]+"\n");return lines.push("--"+result.boundry+"--"),result.body=lines.join(""),result.length=result.body.length,result.type="multipart/form-data; boundary="+result.boundry,result};if(options.form){if("string"==typeof options.form)throw"form name unsupported";if("POST"===options.method){var encoding=(options.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(options.headers["content-type"]=encoding,encoding){case"application/x-www-form-urlencoded":options.body=serialize(options.form).replace(/%20/g,"+");break;case"multipart/form-data":var multi=multipart(options.form);options.body=multi.body,options.headers["content-type"]=multi.type;break;default:throw new Error("unsupported encoding:"+encoding)}}}return options.onResponse=options.onResponse||noop,options.onResponse===!0&&(options.onResponse=callback,options.callback=noop),!options.headers.authorization&&options.auth&&(options.headers.authorization="Basic "+b64_enc(options.auth.username+":"+options.auth.password)),run_xhr(options)}function run_xhr(options){function too_late(){timed_out=!0;var er=new Error("ETIMEDOUT");return er.code="ETIMEDOUT",er.duration=options.timeout,request.log.error("Timeout",{id:xhr._id,milliseconds:options.timeout}),options.callback(er,xhr)}function on_state_change(){if(timed_out)return request.log.debug("Ignoring timed out state change",{state:xhr.readyState,id:xhr.id});if(request.log.debug("State change",{state:xhr.readyState,id:xhr.id,timed_out:timed_out}),xhr.readyState===XHR.OPENED){request.log.debug("Request started",{id:xhr.id});for(var key in options.headers)xhr.setRequestHeader(key,options.headers[key])}else xhr.readyState===XHR.HEADERS_RECEIVED?on_response():xhr.readyState===XHR.LOADING?(on_response(),on_loading()):xhr.readyState===XHR.DONE&&(on_response(),on_loading(),on_end())}function on_response(){if(!did.response){if(did.response=!0,request.log.debug("Got response",{id:xhr.id,status:xhr.status}),clearTimeout(xhr.timeoutTimer),xhr.statusCode=xhr.status,is_cors&&0==xhr.statusCode){var cors_err=new Error("CORS request rejected: "+options.uri);return cors_err.cors="rejected",did.loading=!0,did.end=!0,options.callback(cors_err,xhr)}options.onResponse(null,xhr)}}function on_loading(){did.loading||(did.loading=!0,request.log.debug("Response body loading",{id:xhr.id}))}function on_end(){if(!did.end){if(did.end=!0,request.log.debug("Request done",{id:xhr.id}),xhr.body=xhr.responseText,options.json)try{xhr.body=JSON.parse(xhr.responseText)}catch(er){return options.callback(er,xhr)}options.callback(null,xhr,xhr.body)}}var xhr=new XHR,timed_out=!1,is_cors=is_crossDomain(options.uri),supports_cors="withCredentials"in xhr;if(req_seq+=1,xhr.seq_id=req_seq,xhr.id=req_seq+": "+options.method+" "+options.uri,xhr._id=xhr.id,is_cors&&!supports_cors){var cors_err=new Error("Browser does not support cross-origin request: "+options.uri);return cors_err.cors="unsupported",options.callback(cors_err,xhr)}xhr.timeoutTimer=setTimeout(too_late,options.timeout);var did={response:!1,loading:!1,end:!1};return xhr.onreadystatechange=on_state_change,xhr.open(options.method,options.uri,!0),is_cors&&(xhr.withCredentials=!!options.withCredentials),xhr.send(options.body),xhr}function noop(){}function getLogger(){var level,i,logger={},levels=["trace","debug","info","warn","error"];for(i=0;i<levels.length;i++)level=levels[i],logger[level]=noop,"undefined"!=typeof console&&console&&console[level]&&(logger[level]=formatted(console,level));return logger}function formatted(obj,method){function formatted_logger(str,context){return"object"==typeof context&&(str+=" "+JSON.stringify(context)),obj[method].call(obj,str)}return formatted_logger}function is_crossDomain(url){var ajaxLocation,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}var ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],parts=rurl.exec(url.toLowerCase()),result=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)));return result}function b64_enc(data){var o1,o2,o3,h1,h2,h3,h4,bits,b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,ac=0,enc="",tmp_arr=[];if(!data)return data;do o1=data.charCodeAt(i++),o2=data.charCodeAt(i++),o3=data.charCodeAt(i++),bits=o1<<16|o2<<8|o3,h1=bits>>18&63,h2=bits>>12&63,h3=bits>>6&63,h4=63&bits,tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);while(i<data.length);switch(enc=tmp_arr.join(""),data.length%3){case 1:enc=enc.slice(0,-2)+"==";break;case 2:enc=enc.slice(0,-1)+"="}return enc}var XHR=XMLHttpRequest;if(!XHR)throw new Error("missing XMLHttpRequest");request.log={trace:noop,debug:noop,info:noop,warn:noop,error:noop};var DEFAULT_TIMEOUT=3*60*1e3,req_seq=0;request.withCredentials=!1,request.DEFAULT_TIMEOUT=DEFAULT_TIMEOUT,request.defaults=function(options){var def=function(method){var d=function(params,callback){params="string"==typeof params?{uri:params}:JSON.parse(JSON.stringify(params));for(var i in options)void 0===params[i]&&(params[i]=options[i]);return method(params,callback)};return d},de=def(request);return de.get=def(request.get),de.post=def(request.post),de.put=def(request.put),de.head=def(request.head),de};var shortcuts=["get","put","post","head"];shortcuts.forEach(function(shortcut){var method=shortcut.toUpperCase(),func=shortcut.toLowerCase();request[func]=function(opts){"string"==typeof opts?opts={method:method,uri:opts}:(opts=JSON.parse(JSON.stringify(opts)),opts.method=method);var args=[opts].concat(Array.prototype.slice.apply(arguments,[1]));return request.apply(this,args)}}),request.couch=function(options,callback){function couch_handler(er,resp,body){if(er)return callback(er,resp,body);if((resp.statusCode<200||resp.statusCode>299)&&body.error){er=new Error("CouchDB error: "+(body.error.reason||body.error.error));for(var key in body)er[key]=body[key];return callback(er,resp,body)}return callback(er,resp,body)}"string"==typeof options&&(options={uri:options}),options.json=!0,options.body&&(options.json=options.body),delete options.body,callback=callback||noop;var xhr=request(options,couch_handler);return xhr},module.exports=request},{}],2:[function(require){var request=require("browser-request");request("http://apps.finn.no/api/",function(err,resp,bdy){console.log(JSON.stringify(bdy))})},{"browser-request":1}]},{},[2]);